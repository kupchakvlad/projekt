<?php
session_start();

$login_error = $_SESSION['login_error'] ?? '';
unset($_SESSION['login_error']);

$registration_error = $_SESSION['registration_error'] ?? '';
unset($_SESSION['registration_error']);

$dark_mode_class = (isset($_COOKIE['mode']) && $_COOKIE['mode'] === 'dark') ? 'dark-mode' : '';
?>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Registration</title>
        <link rel="stylesheet" href="registration_form.css"/>
        <script src="registration_form.js" defer></script>
</head>
<body class="<?php echo $dark_mode_class; ?>">
    <button type="button" id="dark-mode-btn">Dark Mode</button>
    <div class="form-container">
        <div class="top-buttons">
            <button id="registration_button" class="registration-form">Registration</button>
            <button id="login_button" class="login-form">Login</button>
        </div>
        
        <form action="login.php" method="POST" id="login_form">
            <label for="login_email">Enter your email:
                <input type="text" id="login_email" name="login_email" required>
            </label>
            <label for="login_password">Enter your password:
                <input type="password" id="login_password" name="login_password" required>
            </label>
            
            <?php if ($login_error): ?>
                <div class="login-error"><?php echo htmlspecialchars($login_error); ?></div>
            <?php endif; ?>

            <input type="submit" id="login_submit" name="login_submit" class="submit" value="Sign-in">
        </form>
        
        <form action="registration.php" method="POST" id="registration_form" class="active">
            <label for="registration_name">Enter name: 
                <input type="text" id="registration_name" name="registration_name" required>
            </label>
            <div id="registration_email_container">
                <label for="registration_email">Enter email: 
                    <input type="text" id="registration_email" name="registration_email" required>
                </label>
            </div>
            <div id="registration_password_container">
                <label for="registration_password">Enter password:
                    <input type="password" id="registration_password" name="registration_password" required>
                </label>
                <label for="registration_password_confirmation">Enter password once again:
                    <input type="password" id="registration_password_confirmation" name="registration_password_confirmation" required>
                </label>
                <?php if ($registration_error): ?>
                    <div class="email-error-message"> <?php echo htmlspecialchars($registration_error); ?> </div>
                <?php endif; ?>
            </div>
            <input type="submit" name="registration_submit" class="submit" id="registration_submit" value="Sign-up">
        </form>
    </div>
</body>
</html>